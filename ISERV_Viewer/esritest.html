<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">
    <title>Basemap Toggle</title>
    <link rel="stylesheet" type="text/css" href="http://js.arcgis.com/3.8/js/esri/css/esri.css">
    <style>
        html, body, #map {
            padding: 0;
            margin: 0;
            height: 100%;
        }

        #BasemapToggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 50;
        }
    </style>
    <script src="http://js.arcgis.com/3.8/"></script>
    <script>
        var map;
        var theImage;
        var myImageLayer;
        require([
          "esri/map",
          "esri/dijit/BasemapToggle",
          "esri/layers/MapImageLayer",
          "esri/layers/MapImage",
          "esri/geometry/Extent",
          "esri/SpatialReference",
          "dojo/domReady!"
        ], function (
          Map, BasemapToggle
        ) {

            map = new Map("map", {
                center: [-70.6508, 43.1452],
                zoom: 16,
                basemap: "topo"
            });

            var toggle = new BasemapToggle({
                map: map,
                basemap: "satellite"
            }, "BasemapToggle");
            toggle.startup();

            dojo.require("esri.layers.MapImageLayer");
            var point = new esri.geometry.Point(-70.6508, 43.1452);
            point = esri.geometry.geographicToWebMercator(point);
            var symbol = new esri.symbol.PictureMarkerSymbol("marker.png", 45, 45);
            var graphic = new esri.Graphic(point, symbol);
            var layer = new esri.layers.GraphicsLayer();
            layer.add(graphic);
            map.addLayer(layer);
            dojo.connect(layer, "onClick", onClick);
           
            var mil = new esri.layers.MapImageLayer();
            myImageLayer = mil;
            //myImageLayer.setOpacity(.5)
            map.addLayer(mil);

            // create an add the actual image
            var mi = new esri.layers.MapImage({
                'extent': new esri.geometry.Extent(-124.848974, 24.396308, -66.885444, 49.384358, new esri.SpatialReference({ wkid: 4326 })),
                'href': 'http://www.nasa.gov/sites/default/files/styles/800x600_autoletterbox/public/mulanjemassif_malawi.jpg'
            });
            mil.addImage(mi);
            theImage = mi;
             //create and add the layer
            //var mil = new esri.layers.MapImage({
            //    'id': 'usgs_screen_overlay'
            //});
            //map.addLayer(mil);

            //// create an add the actual image
            //var mi = new esri.layers.MapImage({
            //    'extent': { 'xmin': -8864908, 'ymin': 3885443, 'xmax': -8762763, 'ymax': 3976997, 'spatialReference': { 'wkid': 3857 } },
            //    'href': 'http://hdds.usgs.gov/hdds2/view/overlay_file/AM01N33_269827W079_1773002011082800000000MS00'
            //});
            //mil.addLayer(mi);
        });

        function onClick()
        {

            if(theImage.visible)
            {
                theImage.hide();
            }
            else {
                theImage.show();
            }
        }
        alert("github sucks!")
    </script>
</head>
<body>
    <div id="map" class="map">
        <div id="BasemapToggle"></div>
    </div>
</body>
</html>